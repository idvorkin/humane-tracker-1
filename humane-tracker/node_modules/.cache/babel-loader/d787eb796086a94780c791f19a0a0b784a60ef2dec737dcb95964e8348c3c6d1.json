{"ast":null,"code":"import _objectSpread from\"/Users/idvorkin/gits/humane-tracker-1/humane-tracker/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{collection,doc,setDoc,getDocs,query,where,Timestamp,deleteDoc,onSnapshot,addDoc}from'firebase/firestore';import{db}from'../config/firebase';import{startOfWeek,endOfWeek,isToday,differenceInDays}from'date-fns';export class HabitService{constructor(){this.habitsCollection=collection(db,'habits');this.entriesCollection=collection(db,'entries');}// Create a new habit\nasync createHabit(habit){const newHabit=_objectSpread(_objectSpread({},habit),{},{createdAt:Timestamp.now(),updatedAt:Timestamp.now()});const docRef=await addDoc(this.habitsCollection,newHabit);return docRef.id;}// Get all habits for a user\nasync getUserHabits(userId){const q=query(this.habitsCollection,where('userId','==',userId));const snapshot=await getDocs(q);return snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));}// Subscribe to habits changes\nsubscribeToHabits(userId,callback){const q=query(this.habitsCollection,where('userId','==',userId));return onSnapshot(q,snapshot=>{const habits=snapshot.docs.map(doc=>{var _data$createdAt,_data$updatedAt;const data=doc.data();return _objectSpread(_objectSpread({id:doc.id},data),{},{createdAt:(_data$createdAt=data.createdAt)!==null&&_data$createdAt!==void 0&&_data$createdAt.toDate?data.createdAt.toDate():new Date(),updatedAt:(_data$updatedAt=data.updatedAt)!==null&&_data$updatedAt!==void 0&&_data$updatedAt.toDate?data.updatedAt.toDate():new Date()});});callback(habits);});}// Add a habit entry\nasync addEntry(entry){const newEntry=_objectSpread(_objectSpread({},entry),{},{date:Timestamp.fromDate(entry.date),createdAt:Timestamp.now()});const docRef=await addDoc(this.entriesCollection,newEntry);return docRef.id;}// Get entries for a habit within a date range\nasync getHabitEntries(habitId,startDate,endDate){const q=query(this.entriesCollection,where('habitId','==',habitId),where('date','>=',Timestamp.fromDate(startDate)),where('date','<=',Timestamp.fromDate(endDate)));const snapshot=await getDocs(q);return snapshot.docs.map(doc=>{var _data$date,_data$createdAt2;const data=doc.data();return _objectSpread(_objectSpread({id:doc.id},data),{},{date:(_data$date=data.date)!==null&&_data$date!==void 0&&_data$date.toDate?data.date.toDate():new Date(),createdAt:(_data$createdAt2=data.createdAt)!==null&&_data$createdAt2!==void 0&&_data$createdAt2.toDate?data.createdAt.toDate():new Date()});});}// Subscribe to entries changes for a date range\nsubscribeToWeekEntries(userId,startDate,endDate,callback){const q=query(this.entriesCollection,where('userId','==',userId),where('date','>=',Timestamp.fromDate(startDate)),where('date','<=',Timestamp.fromDate(endDate)));return onSnapshot(q,snapshot=>{const entries=snapshot.docs.map(doc=>{var _data$date2,_data$createdAt3;const data=doc.data();return _objectSpread(_objectSpread({id:doc.id},data),{},{date:(_data$date2=data.date)!==null&&_data$date2!==void 0&&_data$date2.toDate?data.date.toDate():new Date(),createdAt:(_data$createdAt3=data.createdAt)!==null&&_data$createdAt3!==void 0&&_data$createdAt3.toDate?data.createdAt.toDate():new Date()});});callback(entries);});}// Calculate habit status\ncalculateHabitStatus(habit,entries){let currentDate=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new Date();const weekStart=startOfWeek(currentDate,{weekStartsOn:1});// Week starts on Monday\nconst weekEnd=endOfWeek(currentDate,{weekStartsOn:1});const weekEntries=entries.filter(e=>e.date>=weekStart&&e.date<=weekEnd);const totalValue=weekEntries.reduce((sum,e)=>sum+e.value,0);const todayEntry=weekEntries.find(e=>isToday(e.date));// Check if done today\nif(todayEntry&&todayEntry.value>=1){return'done';}// Check if weekly target is met\nif(totalValue>=habit.targetPerWeek){return'met';}// Calculate days left and entries needed\nconst daysLeft=differenceInDays(weekEnd,currentDate)+1;const entriesNeeded=habit.targetPerWeek-totalValue;// Check if due today\nif(daysLeft<=entriesNeeded&&!todayEntry){if(daysLeft===0)return'overdue';if(daysLeft===1)return'today';if(daysLeft===2)return'tomorrow';return'soon';}return'pending';}// Get habits with status for trailing 7 days\nasync getHabitsWithStatus(userId){const habits=await this.getUserHabits(userId);const currentDate=new Date();// Get trailing 7 days (today and previous 6 days)\nconst endDate=new Date(currentDate);endDate.setHours(23,59,59,999);const startDate=new Date(currentDate);startDate.setDate(startDate.getDate()-6);startDate.setHours(0,0,0,0);const habitsWithStatus=[];for(const habit of habits){const entries=await this.getHabitEntries(habit.id,startDate,endDate);const status=this.calculateHabitStatus(habit,entries,currentDate);const currentWeekCount=entries.reduce((sum,e)=>sum+e.value,0);habitsWithStatus.push(_objectSpread(_objectSpread({},habit),{},{status,currentWeekCount,entries}));}return habitsWithStatus;}// Update entry value\nasync updateEntry(entryId,value){const entryRef=doc(this.entriesCollection,entryId);await setDoc(entryRef,{value},{merge:true});}// Delete entry\nasync deleteEntry(entryId){await deleteDoc(doc(this.entriesCollection,entryId));}// Delete habit\nasync deleteHabit(habitId){await deleteDoc(doc(this.habitsCollection,habitId));}}","map":{"version":3,"names":["collection","doc","setDoc","getDocs","query","where","Timestamp","deleteDoc","onSnapshot","addDoc","db","startOfWeek","endOfWeek","isToday","differenceInDays","HabitService","constructor","habitsCollection","entriesCollection","createHabit","habit","newHabit","_objectSpread","createdAt","now","updatedAt","docRef","id","getUserHabits","userId","q","snapshot","docs","map","data","subscribeToHabits","callback","habits","_data$createdAt","_data$updatedAt","toDate","Date","addEntry","entry","newEntry","date","fromDate","getHabitEntries","habitId","startDate","endDate","_data$date","_data$createdAt2","subscribeToWeekEntries","entries","_data$date2","_data$createdAt3","calculateHabitStatus","currentDate","arguments","length","undefined","weekStart","weekStartsOn","weekEnd","weekEntries","filter","e","totalValue","reduce","sum","value","todayEntry","find","targetPerWeek","daysLeft","entriesNeeded","getHabitsWithStatus","setHours","setDate","getDate","habitsWithStatus","status","currentWeekCount","push","updateEntry","entryId","entryRef","merge","deleteEntry","deleteHabit"],"sources":["/Users/idvorkin/gits/humane-tracker-1/humane-tracker/src/services/habitService.ts"],"sourcesContent":["import { \n  collection, \n  doc, \n  setDoc, \n  getDocs, \n  query, \n  where, \n  Timestamp,\n  deleteDoc,\n  onSnapshot,\n  addDoc\n} from 'firebase/firestore';\nimport { db } from '../config/firebase';\nimport { Habit, HabitEntry, HabitWithStatus, HabitStatus } from '../types/habit';\nimport { startOfWeek, endOfWeek, isToday, differenceInDays } from 'date-fns';\n\nexport class HabitService {\n  private habitsCollection = collection(db, 'habits');\n  private entriesCollection = collection(db, 'entries');\n\n  // Create a new habit\n  async createHabit(habit: Omit<Habit, 'id' | 'createdAt' | 'updatedAt'>): Promise<string> {\n    const newHabit = {\n      ...habit,\n      createdAt: Timestamp.now(),\n      updatedAt: Timestamp.now()\n    };\n    const docRef = await addDoc(this.habitsCollection, newHabit);\n    return docRef.id;\n  }\n\n  // Get all habits for a user\n  async getUserHabits(userId: string): Promise<Habit[]> {\n    const q = query(this.habitsCollection, where('userId', '==', userId));\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    } as Habit));\n  }\n\n  // Subscribe to habits changes\n  subscribeToHabits(userId: string, callback: (habits: Habit[]) => void) {\n    const q = query(this.habitsCollection, where('userId', '==', userId));\n    return onSnapshot(q, (snapshot) => {\n      const habits = snapshot.docs.map(doc => {\n        const data = doc.data();\n        return {\n          id: doc.id,\n          ...data,\n          createdAt: data.createdAt?.toDate ? data.createdAt.toDate() : new Date(),\n          updatedAt: data.updatedAt?.toDate ? data.updatedAt.toDate() : new Date()\n        } as Habit;\n      });\n      callback(habits);\n    });\n  }\n\n  // Add a habit entry\n  async addEntry(entry: Omit<HabitEntry, 'id' | 'createdAt'>): Promise<string> {\n    const newEntry = {\n      ...entry,\n      date: Timestamp.fromDate(entry.date),\n      createdAt: Timestamp.now()\n    };\n    const docRef = await addDoc(this.entriesCollection, newEntry);\n    return docRef.id;\n  }\n\n  // Get entries for a habit within a date range\n  async getHabitEntries(habitId: string, startDate: Date, endDate: Date): Promise<HabitEntry[]> {\n    const q = query(\n      this.entriesCollection,\n      where('habitId', '==', habitId),\n      where('date', '>=', Timestamp.fromDate(startDate)),\n      where('date', '<=', Timestamp.fromDate(endDate))\n    );\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => {\n      const data = doc.data();\n      return {\n        id: doc.id,\n        ...data,\n        date: data.date?.toDate ? data.date.toDate() : new Date(),\n        createdAt: data.createdAt?.toDate ? data.createdAt.toDate() : new Date()\n      } as HabitEntry;\n    });\n  }\n\n  // Subscribe to entries changes for a date range\n  subscribeToWeekEntries(userId: string, startDate: Date, endDate: Date, callback: (entries: HabitEntry[]) => void) {\n    const q = query(\n      this.entriesCollection,\n      where('userId', '==', userId),\n      where('date', '>=', Timestamp.fromDate(startDate)),\n      where('date', '<=', Timestamp.fromDate(endDate))\n    );\n    return onSnapshot(q, (snapshot) => {\n      const entries = snapshot.docs.map(doc => {\n        const data = doc.data();\n        return {\n          id: doc.id,\n          ...data,\n          date: data.date?.toDate ? data.date.toDate() : new Date(),\n          createdAt: data.createdAt?.toDate ? data.createdAt.toDate() : new Date()\n        } as HabitEntry;\n      });\n      callback(entries);\n    });\n  }\n\n  // Calculate habit status\n  calculateHabitStatus(habit: Habit, entries: HabitEntry[], currentDate: Date = new Date()): HabitStatus {\n    const weekStart = startOfWeek(currentDate, { weekStartsOn: 1 }); // Week starts on Monday\n    const weekEnd = endOfWeek(currentDate, { weekStartsOn: 1 });\n    \n    const weekEntries = entries.filter(e => \n      e.date >= weekStart && e.date <= weekEnd\n    );\n    \n    const totalValue = weekEntries.reduce((sum, e) => sum + e.value, 0);\n    const todayEntry = weekEntries.find(e => isToday(e.date));\n    \n    // Check if done today\n    if (todayEntry && todayEntry.value >= 1) {\n      return 'done';\n    }\n    \n    // Check if weekly target is met\n    if (totalValue >= habit.targetPerWeek) {\n      return 'met';\n    }\n    \n    // Calculate days left and entries needed\n    const daysLeft = differenceInDays(weekEnd, currentDate) + 1;\n    const entriesNeeded = habit.targetPerWeek - totalValue;\n    \n    // Check if due today\n    if (daysLeft <= entriesNeeded && !todayEntry) {\n      if (daysLeft === 0) return 'overdue';\n      if (daysLeft === 1) return 'today';\n      if (daysLeft === 2) return 'tomorrow';\n      return 'soon';\n    }\n    \n    return 'pending';\n  }\n\n  // Get habits with status for trailing 7 days\n  async getHabitsWithStatus(userId: string): Promise<HabitWithStatus[]> {\n    const habits = await this.getUserHabits(userId);\n    const currentDate = new Date();\n    // Get trailing 7 days (today and previous 6 days)\n    const endDate = new Date(currentDate);\n    endDate.setHours(23, 59, 59, 999);\n    const startDate = new Date(currentDate);\n    startDate.setDate(startDate.getDate() - 6);\n    startDate.setHours(0, 0, 0, 0);\n    \n    const habitsWithStatus: HabitWithStatus[] = [];\n    \n    for (const habit of habits) {\n      const entries = await this.getHabitEntries(habit.id, startDate, endDate);\n      const status = this.calculateHabitStatus(habit, entries, currentDate);\n      const currentWeekCount = entries.reduce((sum, e) => sum + e.value, 0);\n      \n      habitsWithStatus.push({\n        ...habit,\n        status,\n        currentWeekCount,\n        entries\n      });\n    }\n    \n    return habitsWithStatus;\n  }\n\n  // Update entry value\n  async updateEntry(entryId: string, value: number): Promise<void> {\n    const entryRef = doc(this.entriesCollection, entryId);\n    await setDoc(entryRef, { value }, { merge: true });\n  }\n\n  // Delete entry\n  async deleteEntry(entryId: string): Promise<void> {\n    await deleteDoc(doc(this.entriesCollection, entryId));\n  }\n\n  // Delete habit\n  async deleteHabit(habitId: string): Promise<void> {\n    await deleteDoc(doc(this.habitsCollection, habitId));\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}